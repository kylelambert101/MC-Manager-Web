(this["webpackJsonpmc-manager-web"]=this["webpackJsonpmc-manager-web"]||[]).push([[0],{146:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),o=t(30),r=t.n(o),c=t(210),s=t(64),l=t(222),u=t(223),d=t(36),m=t(213),f=t(45),b=t(216),p=t(112),j=t(217),g=t(204),O=t(113),h=t(4),x=function(e){var n=e.visible,t=e.setVisible,a=e.message,i=e.title,o=e.onConfirm,r=e.onCancel,c=e.confirmAltText,s=e.cancelAltText,l={type:f.a.normal,title:i||"Please Confirm",closeButtonAriaLabel:"Close",subText:a};return Object(h.jsx)(b.a,{hidden:!n,dialogContentProps:l,onDismiss:function(){return t(!1)},children:Object(h.jsx)(p.a,{children:Object(h.jsxs)(j.a,{horizontal:!0,horizontalAlign:"center",tokens:{childrenGap:"10px"},children:[Object(h.jsx)(g.a,{onClick:function(){t(!1),o()},text:c||"Confirm"}),Object(h.jsx)(O.a,{onClick:function(){t(!1),"undefined"!==typeof r&&r()},text:s||"Cancel"})]})})})},v=t(51),y=(t(110),t(91),t(60),t(92)),N=t.n(y),C=t(59),T=t(16),S=t(93),_=t(8),k=function(e){return Object.keys(e).map((function(n){return{name:n,dataType:typeof e[n]}}))},A=[_.ACTIVE,_.DATE,_.DAY,_.TITLE,_.NEW_FILE_NAME,_.ORIGINAL_FILE_NAME,_.ORIGINAL_FILE_PATH,_.FILE_EXTENSION,_.ARTIST,_.ALBUM,_.ALBUM_ARTIST,_.TRACK_NUMBER,_.TRACK_TOTAL,_.DURATION],w=function(e){var n;return(null===(n=S.parse(e))||void 0===n?void 0:n.data)||[]},I=function(e,n){if(e.length===A.length)return e.reduce((function(e,n,t){var a,i=A[t];switch(i.dataType){case"number":a=Number(n);break;case"boolean":a=Boolean(Number(n));break;default:a=n}return Object(T.a)(Object(T.a)({},e),{},Object(C.a)({},i.name,a))}),{id:n})},F="utf8",L=function(e,n){var t=[A.map((function(e){return e.csvHeaderName})).join(",")].concat(Object(v.a)(n.map((function(e){return function(e){var n=k(e).reduce((function(n,t){var a,i=t.name,o=t.dataType,r=Reflect.get(e,t.name);switch(o){case"number":a=Number.isNaN(r)?"None":r;break;case"boolean":a=Number(r);break;default:a=r}return A.some((function(e){return e.name===i}))?Object(T.a)(Object(T.a)({},n),{},Object(C.a)({},t.name,a)):n}),{});return S.unparse([n],{header:!1})}(e)})))).join("\n");try{N.a.writeFileSync(e,t,{encoding:F})}catch(a){throw console.log("Error writing data to ".concat(e)),console.log(t),a}},E=t(219),D=t(214),R=t(206),P=t(55),H=t(114),V=t(209),M=t(6),B=function(e,n,t){return null!==t&&void 0!==t&&t.ignoreOrder?JSON.stringify(e.sort())===JSON.stringify(n.sort()):JSON.stringify(e)===JSON.stringify(n)},G=function(e){return e.map((function(e){return k(e)})).flat().map((function(e){return JSON.stringify(e)})).filter((function(e,n,t){return t.indexOf(e)===n})).map((function(e){return JSON.parse(e)})).map((function(n){var t=function(e){var n=Object.keys(_).map((function(e){return Reflect.get(_,e)})).find((function(n){return n.name===e}));return n?n.displayName:e.replace(/_/g," ").split(" ").map((function(e){return e.length>0?e[0].toUpperCase()+e.substr(1).toLowerCase():e})).join(" ")}(n.name),a=function(e,n){return n.map((function(n){return Reflect.get(n,e)})).filter((function(e,n,t){return t.indexOf(e)===n&&"undefined"!==typeof e}))}(n.name,e).map((function(e){return"".concat(e).length})),i=Math.min(500,7*Math.max.apply(Math,[n.name.length].concat(Object(v.a)(a))));return{key:"column_".concat(n.name),name:t,fieldName:n.name,minWidth:i,isResizable:!0,isCollapsable:!1,data:n.dataType,onRender:function(e){return Object(h.jsx)("span",{children:"".concat(Reflect.get(e,n.name))})}}}))},J=t(220),U=function(e){var n=e.active,t=e.onChange;return Object(h.jsx)(J.a,{checked:n,boxSide:"end",styles:{root:{marginLeft:"0.75em"}},onChange:function(){t(!n)}})},z=function(e){var n=e.songs,t=e.onSongChange,i=e.onColumnClick,o=e.sortColumns,r=e.viewOptions,c=n,s=a.useMemo((function(){return(0===c.length?G([{id:1,active:!0,date:"2020-06-01",day:"2020-06-01",title:"Item 1",new_file_name:"item_1.txt",original_file_name:"origname",original_file_path:"origpath",file_extension:"extension",artist:"artist",album:"album",album_artist:"albumartist",track_number:1,track_total:10,duration:100},{id:2,active:!1,date:"2020-06-02",day:"2020-06-02",title:"Item 2",new_file_name:"item_2.txt",original_file_name:"origname2",original_file_path:"origpath2",file_extension:"extension2",artist:"artist2",album:"album2",album_artist:"albumartist2",track_number:2,track_total:10,duration:200}]):G(c)).map((function(e){var n,a,r=null===o||void 0===o?void 0:o.find((function(n){return n.fieldName===e.fieldName}));return"undefined"!==typeof r?(n=!0,a="descending"===r.direction):(n=void 0,a=void 0),Object(T.a)(Object(T.a)({},e),{},{onRender:function(n){return function(e,n,t){var a,i=Reflect.get(e,n.name);switch(n.name){case _.ID.name:a=Object(h.jsx)("span",{style:{fontFamily:"monospace",color:"grey"},children:Object(h.jsx)(h.Fragment,{children:"".concat(i)})});break;case _.ACTIVE.name:a=Object(h.jsx)(U,{active:e.active,onChange:function(n){t(Object(T.a)(Object(T.a)({},e),{},{active:n}))}});break;default:a=Object(h.jsx)("span",{children:"".concat(i)})}return a}(n,{name:e.fieldName,dataType:e.data},t)},onColumnClick:i,isSorted:n,isSortedDescending:a})})).filter((function(e){return!r.hiddenColumns.some((function(n){return n.name===e.fieldName}))}))}),[c.length,o,r]);return Object(h.jsx)(V.a,{columns:s,items:c,checkboxVisibility:M.a.hidden,onRenderDetailsHeader:function(e,n){if(!e||!n)return null;return Object(h.jsx)(R.a,{stickyPosition:P.a.Header,isScrollSynced:!0,children:n(Object(T.a)(Object(T.a)({},e),{},{styles:{root:{paddingTop:0}},onRenderColumnHeaderTooltip:function(e){return Object(h.jsx)(D.a,Object(T.a)({},e))}}))})},constrainMode:M.d.unconstrained,layoutMode:M.e.fixedColumns,onRenderRow:function(e){var n={};if(e){var t=e.item;return r.fadeInactive&&(t.active||(n.root={color:"lightgrey"})),Object(h.jsx)(H.a,Object(T.a)(Object(T.a)({},e),{},{styles:n}))}return null}})},W=function(e){var n=e.visible,t=e.setVisible,i=e.onSubmit,o=e.onCancel,r=e.title,c=e.message,s=e.existingSongs,l=a.useState([]),u=Object(d.a)(l,2),m=u[0],x=u[1],v=a.useState([]),y=Object(d.a)(v,2),N=y[0],C=y[1];a.useEffect((function(){var e=m.map((function(e,n){return I(e,n+1)})).filter((function(e){return"undefined"!==typeof e})).filter((function(e){return B(Object.keys(e),Object.keys(_).map((function(e){return Reflect.get(_,e).name})),{ignoreOrder:!0})}));C(e)}),[m,C]);var T={type:f.a.normal,title:r||"",closeButtonAriaLabel:"Close",subText:c},S=function(){t(!1),x([]),"undefined"!==typeof o&&o()},k=function(){var e=m.map((function(e,n){return N.some((function(e){return e.id===n+1}))?void 0:{id:n+1,row:e}})).filter((function(e){return"undefined"!==typeof e}));if(e.length>0){if(1===e.length){var n=e[0];return"Row ".concat(null===n||void 0===n?void 0:n.id," could not be parsed into a song.")}return"The following rows could not be parsed into songs: ".concat(e.map((function(e){return null===e||void 0===e?void 0:e.id})).join(", "))}var t=N.map((function(e){return e.new_file_name})).filter((function(e,n,t){return t.indexOf(e)===n}));if(t.length!==N.length){var a=t.map((function(e){return{newFileName:e,count:N.filter((function(n){return n.new_file_name===e})).length}})).filter((function(e){return e.count>1}));return"Duplicate data detected. ".concat(a.map((function(e){return'"'.concat(e.newFileName,'" found ').concat(e.count," times")})).join("; "))}var i=t.filter((function(e){return s.some((function(n){return n.new_file_name===e}))}));return i.length>0?"Duplicate data detected: ".concat(i.map((function(e){return'"'.concat(e,'" already exists in the dataset.')}))):""};return Object(h.jsxs)(b.a,{hidden:!n,dialogContentProps:T,onDismiss:S,minWidth:"80%",maxWidth:"80%",children:[Object(h.jsx)(E.a,{multiline:!0,autoAdjustHeight:!0,onChange:function(e,n){var t=w(n||"").filter((function(e){return!B(e,[""])}));B(m,t)||x(t)},onGetErrorMessage:k}),Object(h.jsx)("h3",{children:"Parsed Songs:"}),Object(h.jsx)(z,{songs:N,onSongChange:function(){return!1},viewOptions:{fadeInactive:!1,hiddenColumns:[_.ID]}}),Object(h.jsx)(p.a,{children:Object(h.jsxs)(j.a,{horizontal:!0,horizontalAlign:"center",tokens:{childrenGap:"10px"},children:[Object(h.jsx)(g.a,{onClick:function(){t(!1),i(N),x([])},text:"Submit",disabled:""!==k()}),Object(h.jsx)(O.a,{onClick:S,text:"Cancel"})]})})]})},K=t(215),Y=t(111),X=t(221),q=function(e){var n=e.visible,t=e.setVisible,i=e.onSubmit,o=e.onCancel,r=e.viewOptions,c=a.useState(r),s=Object(d.a)(c,2),l=s[0],u=s[1],m={type:f.a.normal,title:"View Options",closeButtonAriaLabel:"Close"},x=function(){t(!1),u(r),"undefined"!==typeof o&&o()},y={marginTop:"1em"};return Object(h.jsxs)(b.a,{hidden:!n,dialogContentProps:m,onDismiss:x,minWidth:"80%",maxWidth:"80%",children:[Object(h.jsxs)(K.a,{"aria-label":"View Options Pivot",children:[Object(h.jsx)(Y.a,{headerText:"General",children:Object(h.jsx)(j.a,{tokens:{childrenGap:"1em"},style:y,children:Object(h.jsx)(J.a,{label:"Fade Inactive Song Rows",checked:l.fadeInactive,onChange:function(e,n){u(Object(T.a)(Object(T.a)({},l),{},{fadeInactive:!l.fadeInactive}))},styles:{root:{marginTop:10}}})})}),Object(h.jsxs)(Y.a,{headerText:"Show/Hide Columns",children:[Object(h.jsx)(X.a,{htmlFor:"showHideColumnStack",children:"Visible Columns:"}),Object(h.jsx)(j.a,{tokens:{childrenGap:"1em"},style:y,children:A.map((function(e){return Object(h.jsx)(J.a,{label:e.csvHeaderName,checked:!l.hiddenColumns.some((function(n){return n.name===e.name})),onChange:function(){return function(e){var n=l.hiddenColumns,t=n.some((function(n){return n.name===e.name}));u(t?Object(T.a)(Object(T.a)({},l),{},{hiddenColumns:n.filter((function(n){return n.name!==e.name}))}):Object(T.a)(Object(T.a)({},l),{},{hiddenColumns:[].concat(Object(v.a)(n),[e])}))}(e)}},e.name)}))},"showHideColumnStack")]})]}),Object(h.jsx)(p.a,{children:Object(h.jsxs)(j.a,{horizontal:!0,horizontalAlign:"center",tokens:{childrenGap:"10px"},children:[Object(h.jsx)(g.a,{onClick:function(){t(!1),i(l)},text:"Submit"}),Object(h.jsx)(O.a,{onClick:x,text:"Cancel"})]})})]})},Q=t(2),Z=t(212),$=Object(Q.v)(),ee=Object(Q.y)({header:[$.fonts.xLargePlus,{flex:"1 1 auto",color:$.palette.neutralPrimary,display:"flex",alignItems:"center",fontWeight:Q.d.semibold,padding:"12px 12px 14px 24px"}]}),ne=function(e){var n=e.visible,t=e.setVisible,a=e.onSubmit,i=e.onCancel,o=e.title,r=e.children,c=function(){t(!1),"undefined"!==typeof i&&i()};return Object(h.jsxs)(Z.a,{isOpen:n,onDismiss:c,isBlocking:!1,children:[Object(h.jsx)("div",{className:ee.header,children:Object(h.jsx)("span",{children:o})}),Object(h.jsxs)(j.a,{grow:!0,verticalAlign:"space-between",children:[r,Object(h.jsxs)(j.a,{horizontal:!0,horizontalAlign:"center",tokens:{childrenGap:"10px"},children:[Object(h.jsx)(g.a,{onClick:function(){t(!1),a()},text:"Submit"}),Object(h.jsx)(O.a,{onClick:c,text:"Cancel"})]})]})]})},te=function(){return{isLoading:!1,cachedSongs:[],songs:[],saveFilePath:"",sortColumns:[],viewOptions:{fadeInactive:!1,hiddenColumns:[_.ID]},updateSong:function(e){return null},toggleAndApplySortColumn:function(e){return null},loadDataFromCSV:function(){return null},overwriteCachedSongs:function(){return null},resetSorting:function(){return null},resetSongsFromCached:function(){return null},addNewSongs:function(e){return null},setViewOptions:function(e){return null}}},ae={ariaLabel:"More commands"},ie=function(){var e=te(),n=e.saveFilePath,t=e.songs,i=e.sortColumns,o=e.viewOptions,r=e.cachedSongs,c=e.toggleAndApplySortColumn,l=e.loadDataFromCSV,u=e.overwriteCachedSongs,f=e.resetSorting,b=e.resetSongsFromCached,p=e.addNewSongs,j=e.setViewOptions,g=Object(s.useToasts)().addToast,O=a.useState(!1),v=Object(d.a)(O,2),y=v[0],N=v[1],C=a.useState(!1),T=Object(d.a)(C,2),S=T[0],k=T[1],A=a.useState(!1),w=Object(d.a)(A,2),I=w[0],F=w[1],E=a.useState(!1),D=Object(d.a)(E,2),R=D[0],P=D[1],H=a.useMemo((function(){return JSON.stringify(t)!==JSON.stringify(r)}),[t,r]),V=[{key:"upload",text:"Open CSV",iconProps:{iconName:"Database"},onClick:function(){l()}},{key:"save",text:"Save CSV",iconProps:{iconName:"PromotedDatabase"},onClick:function(){L(n,t),u(),g("Successfully saved changes to ".concat(n),{appearance:"success"})},disabled:!H},{key:"newItem",text:"Add Songs",cacheKey:"myCacheKey",iconProps:{iconName:"Add"},onClick:function(){k(!0)},disabled:!a.useMemo((function(){return""!==n}),[n])},{key:"sort",text:"Sort",iconProps:{iconName:"SortLines"},onClick:function(){return!1},subMenuProps:{items:[{key:"newestFirst",name:"Newest First",text:"Newest First",ariaLabel:"Newest First View",iconProps:{iconName:"SortLines"},onClick:function(){f(),c(_.NEW_FILE_NAME.name),c(_.DATE.name),c(_.DATE.name)}},{key:"clearSort",name:"Clear Sort",text:"Clear Sort Rules",ariaLabel:"Clear Sort Rules",iconProps:{iconName:"RemoveFilter"},onClick:function(){f()},disabled:0===i.length}]}},{key:"view",text:"View Options",iconProps:{iconName:"View"},onClick:function(){F(!0)}},{key:"cancel",text:"Cancel Changes",iconProps:{iconName:"Cancel"},onClick:function(){N(!0)},disabled:!H}],M=[{key:"tile",text:"Grid view",ariaLabel:"Grid view",iconOnly:!0,iconProps:{iconName:"Tiles"},onClick:function(){return P(!0)}},{key:"info",text:"Info",ariaLabel:"Info",iconOnly:!0,iconProps:{iconName:"Info"},onClick:function(){return console.log("Info")}}];return Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{children:"test"}),Object(h.jsx)(m.a,{items:V,overflowButtonProps:ae,farItems:M,ariaLabel:"Use left and right arrow keys to navigate between commands"}),Object(h.jsx)(x,{visible:y,setVisible:N,message:"Are you sure you want to discard all changes?",confirmAltText:"Yes, discard!",cancelAltText:"No, go back!",onConfirm:function(){b(),f(),g("Changes discarded",{appearance:"info"})}}),Object(h.jsx)(W,{title:"Add Songs (CSV Text)",message:"Paste CSV rows for new songs below.",visible:S,setVisible:k,onSubmit:function(e){return p(e)},existingSongs:t}),Object(h.jsx)(q,{visible:I,setVisible:F,onSubmit:function(e){j(e)},viewOptions:o}),Object(h.jsx)(ne,{visible:R,setVisible:P,onSubmit:function(){return console.log("a")},title:"Test Popup",children:Object(h.jsx)("span",{children:"Hello"})})]})},oe=function(){var e=te(),n=e.isLoading,t=e.songs,a=e.sortColumns,i=e.viewOptions,o=e.updateSong,r=e.toggleAndApplySortColumn;return Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",position:"absolute",top:0,bottom:0},children:[Object(h.jsx)("div",{style:{flex:0},children:Object(h.jsx)(ie,{})}),Object(h.jsx)("div",{style:{flex:1,position:"relative"},children:Object(h.jsx)(l.a,{children:n?Object(h.jsx)(u.a,{barHeight:4}):Object(h.jsx)(z,{songs:t,onSongChange:function(e){o(e)},onColumnClick:function(e,n){"undefined"!==typeof n&&"undefined"!==typeof n.fieldName&&r(n.fieldName)},sortColumns:a,viewOptions:i})})})]})};function re(){return Object(h.jsx)(s.ToastProvider,{children:Object(h.jsx)(oe,{})})}Object(c.a)();var ce=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(re,{})})},se=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,229)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),a(e),i(e),o(e),r(e)}))};r.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(ce,{})}),document.getElementById("root")),se()},8:function(e){e.exports=JSON.parse('{"ACTIVE":{"csvHeaderName":"Active","dataType":"boolean","displayName":"Active","name":"active"},"ALBUM":{"csvHeaderName":"Album","dataType":"string","displayName":"Album","name":"album"},"ALBUM_ARTIST":{"csvHeaderName":"Album_Artist","dataType":"string","displayName":"Album Artist","name":"album_artist"},"ARTIST":{"csvHeaderName":"Artist","dataType":"string","displayName":"Artist","name":"artist"},"DATE":{"csvHeaderName":"Date","dataType":"string","displayName":"Date","name":"date"},"DAY":{"csvHeaderName":"Day","dataType":"string","displayName":"Day","name":"day"},"DURATION":{"csvHeaderName":"Duration","dataType":"number","displayName":"Duration","name":"duration"},"FILE_EXTENSION":{"csvHeaderName":"File_Extension","dataType":"string","displayName":"File Extension","name":"file_extension"},"ID":{"csvHeaderName":"ID","dataType":"number","displayName":"ID","name":"id"},"NEW_FILE_NAME":{"csvHeaderName":"New_File_Name","dataType":"string","displayName":"New File Name","name":"new_file_name"},"ORIGINAL_FILE_NAME":{"csvHeaderName":"Original_File_Name","dataType":"string","displayName":"Original File Name","name":"original_file_name"},"ORIGINAL_FILE_PATH":{"csvHeaderName":"Original_File_Path","dataType":"string","displayName":"Original File Path","name":"original_file_path"},"TITLE":{"csvHeaderName":"Title","dataType":"string","displayName":"Title","name":"title"},"TRACK_NUMBER":{"csvHeaderName":"Track_Number","dataType":"number","displayName":"Track Number","name":"track_number"},"TRACK_TOTAL":{"csvHeaderName":"Track_Total","dataType":"number","displayName":"Track Total","name":"track_total"}}')}},[[146,1,2]]]);
//# sourceMappingURL=main.d78b2263.chunk.js.map